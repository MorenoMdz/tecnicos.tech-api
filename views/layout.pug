include mixins/_homeInfo

doctype html
html(lang='en')
  head
    - let title = 'tecnicos.tech'
    title= `${title} | ${h.siteName}`

    meta(charset='UTF-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    meta(http-equiv='X-UA-Compatible', content='ie=edge')
    link(rel='stylesheet', href='https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css', integrity='sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4', crossorigin='anonymous')
    link(href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css", rel="stylesheet", integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN", crossorigin="anonymous")
    link(rel='stylesheet', href='/dist/style.css')
    link(rel='shortcut icon', href='favicon.ico', type='image/x-icon')
  body
    block header
      header
        nav.navbar.navbar-expand-md.navbar-dark.bg-dark.col-sm-12.col-md-12
          button.navbar-toggler.collapsed(type='button', data-toggle='collapse', data-target='#navbarsExample04', aria-controls='navbarsExample04', aria-expanded='false', aria-label='Toggle navigation')
            span.navbar-toggler-icon
          a.navbar-brand(href="/") Técnicos tech
            // != h.icon('logo')
            
          #navbarsExample04.navbar-collapse.collapse(style='')
            ul.navbar-nav.mr-auto.lighten-3.py-4.mb-r.font-weight-bold.z-depth-1

              each item in h.menu
                li.nav-item
                  a.nav-link(href=item.slug, class=(currentPath.startsWith(item.slug) ? 'nav-item.active' : ''))
                    //!= h.icon(item.icon)
                    span #{item.title}

            form.form-inline.my-2.my-md-0
              input#search-box.form-control(type='text', placeholder='Buscar por aparelho, defeito ou reparo')
        
            .navbar-nav.px-3#loginDiv
              if user 
                span.nav-item.px-5: a.nav-link(href="/account", class=(currentPath.startsWith('/account') ? 'nav__link--active' : ''))
                  if user.gravatar
                    img.avatar#avatar(src=user.gravatar + '&d=retro')
                  else
                    img.avatar#avatar(src=user.image + '&d=retro')

                span.nav-item.px-5: a.nav-link(href="/logout", class=(currentPath.startsWith('/logout') ? 'nav__link--active' : ''))
                    //!= h.icon('logout')
                    span Desconectar
              else
                li.nav-item.px-5: a.nav-link(href="/register", class=(currentPath.startsWith('/register') ? 'nav__link--active' : '')) Registrar
                li.nav-item.px-5: a.nav-link(href="/login", class=(currentPath.startsWith('/login') ? 'nav__link--active' : '')) Entrar
                
        
    block messages
    if locals.flashes
      //- pre= h.dump(locals.flashes)
      .inner
        .flash-messages
          - const categories = Object.keys(locals.flashes)
          each category in categories
            each message in flashes[category]
              .flash(class=`flash--${category}`)
                p.flash__text!= message
                button.flash__remove(onClick="this.parentElement.remove()") &times;
      
    .content
      block content
      // pre= h.dump(locals.currentPath)
      if locals.currentPath == '/'
        +homeInfo(homeDisplay)


    // Footer
    // footer
    .footer
      .container
        a(href='#')
          i.fa.fa-twitch.fa-3x.fa-fw
        a(href='#')
          i.fa.fa-facebook.fa-3x.fa-fw
        a(href='#')
          i.fa.fa-twitter.fa-3x.fa-fw
        a(href='#')
          i.fa.fa-youtube-play.fa-3x.fa-fw
        a(href='#')
          i.fa.fa-rss.fa-3x.fa-fw
        a(href='#')
          i.fa.fa-vine.fa-3x.fa-fw
        a(href='#')
          i.fa.fa-flickr.fa-3x.fa-fw
        a(href='#')
          i.fa.fa-linkedin.fa-3x.fa-fw
        p Copyright © 2018 All rights reserved

    block scripts
      script(src='https://code.jquery.com/jquery-3.3.1.slim.min.js', integrity='sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo', crossorigin='anonymous')
      script(src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js', integrity='sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ', crossorigin='anonymous')
      script(src='https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js', integrity='sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm', crossorigin='anonymous')
